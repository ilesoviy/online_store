{extend name="public/container"}
{block name="head_top"}
{block name="title"}
{:L(" 註冊","Register")}
{/block}
{block name="content"}
<style type="text/css">
	.authenticate .user-info {
    width: 100%;
    height: .76rem;
    border: 1px solid #e5e5e5;
    border-radius: 3px;
    background-color: #fff;
    margin-top: .1rem;
}
 .authenticate .user-info div{
 	height: 100%;
     float: left;
 }
 .authenticate {margin-top: 1rem; margin-bottom: 120px;}
    .authenticate .title{margin-bottom: .3rem;}
    .authenticate .title span{ display: block; }
    .authenticate .title #logo{width: 80px; margin: 0 auto;}
    .authenticate .title #logo img{width: 100%;}
    .authenticate .title #bt{text-align: center; margin: 0 auto; width: 90%;height: 36px; line-height: 36px;font-size: 20px;}
    .authenticate {
    	margin-top: 1rem;
    	margin-bottom: 120px;
    }
    
    .authenticate .title {
    	margin-bottom: .3rem;
    }
    
    .authenticate .title span {
    	display: block;
    }
    
    .authenticate .title #logo {
    	width: 80px;
    	margin: 0 auto;
    }
    
    .authenticate .title #logo img {
    	width: 100%;
    }
    
    .authenticate .title #bt {
    	text-align: center;
    	margin: 0 auto;
    	width: 90%;
    	height: 36px;
    	line-height: 36px;
    	font-size: 20px;
    }
    
    .login-box {
    	position: fixed;
    	height: 100%;
    	width: 100%;
    	background-color: #fff;
    	padding: 0 0.2rem;
    }
    
    .remark1 {
    	font-size: 0.5rem;
        font-weight: 700;
    	margin: 1rem 0 0.3rem 0;
        color: #E1000F;
    }
    
    .remark2 {
    	font-size: 0.3rem;
    	margin-bottom: 1rem;
        color: #E1000F;
    }
    
    .login-txt {
    	height: 1rem;
    	border-bottom: 1px solid #eee;
    	padding: 0 0.2rem;
    	display: flex;
    	align-items: center;
    	position: relative;
    }
    .mb {
       
        border-bottom: 1px solid #eee;
        padding: 0 0.2rem 10px;
        position: relative;
    }
    
    .login-txt img {
    	width: .42rem;
    	height: .4rem;
    	margin-right: 0.2rem;
    }
    .mb>p {
        line-height: 1.5;
        color: #dd001d;
        margin: 10px 0;
    }
    .mb .problem {
        margin: 10px 0;
    }
    
    
    .login-btn {
    	background-color: orange;
    	color: #fff;
    	width: 100%;
    	border-radius: 0.5rem;
    	padding: 0.2rem 0;
    	font-size: 0.3rem;
    	margin-top: 0.5rem;
        background-color: #E1000F;
    }
    .other {
    	display: flex;
    	justify-content: space-between;
    	margin-top: 0.2rem;
    }
    .showPwd{
    	width: .32rem!important;
    	height: .32rem!important;
    	position: absolute;
    	bottom: 0.35rem;
    	right: 0;
    }
    .qq, .qqq, .qqqq, .secret  {
        width: 100%;
    }
    .secret {
        border: 1px solid #ccc;
        border-radius: 10px;
        padding-left: 10px;
        height: 35px;
        line-height: 35px;

    }
</style>
<!-- <div class="hz">
<div class="authenticate">
    <section>
        <div class="title"><span id="logo"><img src="{$logo}"></span><span id="bt">欢迎注册</span></div>
        <form action="{:Url('register')}" method="post">
            <div class="user-infos"><input type="text" required name="account" placeholder="请输入您的账号(限字母数字下划线)"/></div>
            <div class="user-infos"><input type="text" required name="phone" placeholder="请输入您的手机号"/></div>
            <div class="user-infos"><input type="password" required name="pwd" placeholder="请输入您的密码(限字母数字下划线)"/></div>
            <div class="user-infos"><input type="password" required name="pwd_qr" placeholder="请再次输入密码"/></div>
            <div class="user-infos"><input type="text" required name="is_code" placeholder="请输入您的邀请码"/></div>
            <div class="user-info">
            	<div style="width: 67%">
            	<input type="text" class="form-control" id="verify" name="verify" placeholder="验证码" style="width: 100%; height: 100%; padding-left: .25rem"></div>
            	<div>
                    <span class="input-group-btn" style="padding: 0;margin: 0; display: block;width: 100%">
                        <img id="verify_img" src="{:Url('captcha')}" alt="验证码" style="padding: 0;height: 34px;margin: 0; padding-top: 4px;">
                    </span>
                </div>
            </div>
            <input type="hidden" name="ref" value="" />
            <div class="publish-btn" style="z-index: 9999"><button type="submit">立即注册</button></div>
            <div class="register" style="z-index: 9999; background: #fff;"><a href="{:Url('index')}">已有账号，点击立即登录</a></div>
        </form>
    </section>
</div> -->
<div class="login-box">
     <div class=" flex" style=" z-index: 99; padding: 0.12rem 0.1rem; width: 100%; position: fixed; top: 0; left: 0; background-color: #fff;">
                            <span id="qqq" style="display: flex; width: 8%; align-items: center; margin-right: 2%;">
                                <img  src="/public/uploads/attach/2019/01/15/back.png" style="width: 15px;">
                            </span>
                            <p style="text-align: center;width: 100%;line-height: 0.4rem;">
                             
                            </p>
                            <script type="text/javascript">
                                document.getElementById("qqq").addEventListener("click", function() {
                                    window.history.back(-1);
                                })
                            </script>
                    </div>
	<div class="remark1">{:L(" 註冊後  更精彩","More exciting after registration")}</div>
	<div class="remark2">{:L(" 快加入我們吧~~","Come join us~~")}</div>

	 <form action="{:Url('register')}" method="post">
		<div class="login-txt">
			<img src="{__WAP_PATH}crmeb/images/qyoux.png" />
			<input class="qq" type="text" required name="account" placeholder='{:L(" 請輸入登錄賬號","Please enter your login account")}' />
		</div>
		<div class="login-txt">
			<img src="{__WAP_PATH}crmeb/images/qshuo.png" />
			<input class="qqq" type="password" id="pws" required name="pwd" placeholder='{:L(" 請輸入登錄密码","Please enter your password")}' />
			<img id="show"  class="showPwd" src="{__WAP_PATH}crmeb/images/hied.png" />
		</div>
        <div class="login-txt">
        	<img src="{__WAP_PATH}crmeb/images/qyqm.png" />
        	<input class="qqqq" type="text" required name="is_code"  placeholder='{:L(" 請輸入邀請碼","Please enter the invitation code")}' />
        </div>


        <!-- 密保 -->


         <div class="mb">
            <p>{:L(" 請回答以下問題，在找回密碼時將會用到！選擇其中一個回答即可.","Please answer the following questions, which will be used when retrieving the password!Select one of the answers.")}</p>
            <div class="problem">
                {:L("請輸入您的年齡 ","Please enter your age")}:
            </div>
            <input class="secret " type="text" required name="age"  placeholder='{:L(" 請輸入上面問題的答案","Please enter the answer to the above question")}'/>
            <div class="problem">
               {:L("請輸入您的生日 ","Please enter your birthday")}:
            </div>
            <input class="secret " type="text" required name="birthday"  placeholder='{:L(" 請輸入上面問題的答案","Please enter the answer to the above question")}'/>
            <div class="problem">
               {:L("請輸入您的姓名 ","Please enter your name")}:
            </div>
            <input class="secret " type="text" required name="uname"  placeholder='{:L(" 請輸入上面問題的答案","Please enter the answer to the above question")}'/>
        </div>






		<input type="hidden" name="ref" value="" />
		<div>
            <button id="btn"  type="submit" disabled="true" style="background-color: #ccc;" class="login-btn">{:L(" 註冊","Register")}</button>
        </div>
		<!-- <div class="other"><a href="/wap/login/index.html">登錄</a></div> -->
	</form>
</div>
<script>
	$("#verify_img").click(function () {
    $(this)[0].src ='/wap/login/captcha.html?'+Math.random()
})
  var nums = 1
       document.getElementById("show").addEventListener("click",function() {
            console.log(nums);
           if (nums === 1) {
              document.getElementById("pws").type = "text"
              this.src = "/public/wap/first/crmeb/images/show.png"
               nums++;
           } else {
               document.getElementById("pws").type = "password"
               this.src = "/public/wap/first/crmeb/images/hied.png"
               nums--;
           }
            console.log(nums);
       })
       var qq = document.querySelector(".qq");
       var qqq = document.querySelector(".qqq");
       var qqqq = document.querySelector(".qqqq");
       var age = $("input[name='age']");                  // 年龄
       var uname = $("input[name='uname']");              // 姓名
       var birthday = $("input[name='birthday']");        // 生日
        


       var myreg_email = /^([\.a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/;
      
           qq.addEventListener("blur", function() {
                if(this.value != '' && !myreg_email.test(this.value)){
                    layer.msg('{:L("帳號請填正確郵箱格式","Please fill in the correct email format for the account number")}');
                    document.querySelector(".qq").style.color = "red"
                    document.getElementById("btn").disabled = true
                   document.getElementById("btn").style.backgroundColor = "#ccc"
                }else{
                   document.querySelector(".qq").style.color = "#333" 
                }
               if (this.value != '' && qqq.value != '' &&  qqqq.value != '') {
                    document.getElementById("btn").disabled = false
                     document.getElementById("btn").style.backgroundColor = "#E1000F"
               } else {
                   document.getElementById("btn").disabled = true
                   document.getElementById("btn").style.backgroundColor = "#ccc"
               }
           })
           qqq.addEventListener("blur", function() {
            if(this.value.length<6){
                    layer.msg('{:L("密碼不能低於6位數","The password cannot be less than 6 digits")}');
                    document.querySelector(".qqq").style.color = "red"
                    document.getElementById("btn").disabled = true
                   document.getElementById("btn").style.backgroundColor = "#ccc"
                }else{
                   document.querySelector(".qqq").style.color = "#333" 
                }
               if (this.value != '' && qq.value != '' &&  qqqq.value != '') {
                    document.getElementById("btn").disabled = false
                    document.getElementById("btn").style.backgroundColor = "#E1000F"
               } else {
                   document.getElementById("btn").disabled = true
                   document.getElementById("btn").style.backgroundColor = "#ccc"
               }
           })
           qqqq.addEventListener("input", function() {
          
               if (this.value != '' && qq.value != '' &&  qqq.value != '') {

                    if (age.val() != '' || uname.val() !='' || birthday.val() != '') {
                        document.getElementById("btn").disabled = false
                        document.getElementById("btn").style.backgroundColor = "#E1000F"
                    }else {
                        document.getElementById("btn").disabled = true
                        document.getElementById("btn").style.backgroundColor = "#ccc"
                    }   
                  
               } else {
                   document.getElementById("btn").disabled = true
                   document.getElementById("btn").style.backgroundColor = "#ccc"
               }
           })
            $("input[name='age']").on("input", function () {
                 if (qqqq.value != '' && qq.value != '' &&  qqq.value != '') {

                    if (age.val() != '' || uname.val() !='' || birthday.val() != '') {
                        document.getElementById("btn").disabled = false
                        document.getElementById("btn").style.backgroundColor = "#E1000F"
                    }else {
                        document.getElementById("btn").disabled = true
                        document.getElementById("btn").style.backgroundColor = "#ccc"
                    }   
                  
               } else {
                   document.getElementById("btn").disabled = true
                   document.getElementById("btn").style.backgroundColor = "#ccc"
               }
            })
               $("input[name='uname']").on("input", function () {
                 if (qqqq.value != '' && qq.value != '' &&  qqq.value != '') {

                    if (age.val() != '' || uname.val() !='' || birthday.val() != '') {
                        document.getElementById("btn").disabled = false
                        document.getElementById("btn").style.backgroundColor = "#E1000F"
                    }else {
                        document.getElementById("btn").disabled = true
                        document.getElementById("btn").style.backgroundColor = "#ccc"
                    }   
                  
               } else {
                   document.getElementById("btn").disabled = true
                   document.getElementById("btn").style.backgroundColor = "#ccc"
               }
            })
                  $("input[name='birthday']").on("input", function () {
                 if (qqqq.value != '' && qq.value != '' &&  qqq.value != '') {

                    if (age.val() != '' || uname.val() !='' || birthday.val() != '') {
                        document.getElementById("btn").disabled = false
                        document.getElementById("btn").style.backgroundColor = "#E1000F"
                    }else {
                        document.getElementById("btn").disabled = true
                        document.getElementById("btn").style.backgroundColor = "#ccc"
                    }   
                  
               } else {
                   document.getElementById("btn").disabled = true
                   document.getElementById("btn").style.backgroundColor = "#ccc"
               }
            })

</script>
{/block}